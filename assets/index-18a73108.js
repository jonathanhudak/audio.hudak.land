(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function b(){}function St(t,e){for(const n in e)t[n]=e[n];return t}function mt(t){return t()}function W(){return Object.create(null)}function N(t){t.forEach(mt)}function ht(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Dt(t){return Object.keys(t).length===0}function Ot(t,e,n,r){if(t){const o=pt(t,e,n,r);return t[0](o)}}function pt(t,e,n,r){return t[1]&&r?St(n.ctx.slice(),t[1](r(e))):n.ctx}function Pt(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const l=[],s=Math.max(e.dirty.length,o.length);for(let i=0;i<s;i+=1)l[i]=e.dirty[i]|o[i];return l}return e.dirty|o}return e.dirty}function Lt(t,e,n,r,o,l){if(o){const s=pt(e,n,r,l);t.p(s,o)}}function jt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function E(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function U(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function $(t){return document.createTextNode(t)}function S(){return $(" ")}function A(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function G(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Bt(t){return Array.from(t.childNodes)}function gt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function tt(t,e,n){t.classList[n?"add":"remove"](e)}let D;function w(t){D=t}function It(){if(!D)throw new Error("Function called outside component initialization");return D}function zt(t){It().$$.on_mount.push(t)}const F=[],et=[],P=[],nt=[],Ht=Promise.resolve();let K=!1;function Rt(){K||(K=!0,Ht.then(_t))}function X(t){P.push(t)}const V=new Set;let M=0;function _t(){if(M!==0)return;const t=D;do{try{for(;M<F.length;){const e=F[M];M++,w(e),Vt(e.$$)}}catch(e){throw F.length=0,M=0,e}for(w(null),F.length=0,M=0;et.length;)et.pop()();for(let e=0;e<P.length;e+=1){const n=P[e];V.has(n)||(V.add(n),n())}P.length=0}while(F.length);for(;nt.length;)nt.pop()();K=!1,V.clear(),w(t)}function Vt(t){if(t.fragment!==null){t.update(),N(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(X)}}const L=new Set;let C;function qt(){C={r:0,c:[],p:C}}function Ut(){C.r||N(C.c),C=C.p}function v(t,e){t&&t.i&&(L.delete(t),t.i(e))}function x(t,e,n,r){if(t&&t.o){if(L.has(t))return;L.add(t),C.c.push(()=>{L.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function J(t){t&&t.c()}function j(t,e,n,r){const{fragment:o,after_update:l}=t.$$;o&&o.m(e,n),r||X(()=>{const s=t.$$.on_mount.map(mt).filter(ht);t.$$.on_destroy?t.$$.on_destroy.push(...s):N(s),t.$$.on_mount=[]}),l.forEach(X)}function B(t,e){const n=t.$$;n.fragment!==null&&(N(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Kt(t,e){t.$$.dirty[0]===-1&&(F.push(t),Rt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(t,e,n,r,o,l,s,i=[-1]){const a=D;w(t);const c=t.$$={fragment:null,ctx:[],props:l,update:b,not_equal:o,bound:W(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:W(),dirty:i,skip_bound:!1,root:e.target||a.$$.root};s&&s(c.root);let m=!1;if(c.ctx=n?n(t,e.props||{},(u,d,...f)=>{const _=f.length?f[0]:d;return c.ctx&&o(c.ctx[u],c.ctx[u]=_)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](_),m&&Kt(t,u)),d}):[],c.update(),m=!0,N(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const u=Bt(e.target);c.fragment&&c.fragment.l(u),u.forEach(h)}else c.fragment&&c.fragment.c();e.intro&&v(t.$$.fragment),j(t,e.target,e.anchor,e.customElement),_t()}w(a)}class R{$destroy(){B(this,1),this.$destroy=b}$on(e,n){if(!ht(n))return b;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!Dt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Xt(t){let e,n,r,o;const l=t[8].default,s=Ot(l,t,t[7],null);return{c(){e=y("button"),s&&s.c(),G(e,"class","svelte-11vc9t6"),tt(e,"playing",t[0])},m(i,a){p(i,e,a),s&&s.m(e,null),n=!0,r||(o=[A(e,"mousedown",t[1]),A(e,"mouseup",t[2]),A(e,"keydown",t[3]),A(e,"keyup",t[4]),A(e,"touchstart",t[1],{passive:!0}),A(e,"touchend",t[2],{passive:!0})],r=!0)},p(i,[a]){s&&s.p&&(!n||a&128)&&Lt(s,l,i,i[7],n?Pt(l,i[7],a,null):jt(i[7]),null),(!n||a&1)&&tt(e,"playing",i[0])},i(i){n||(v(s,i),n=!0)},o(i){x(s,i),n=!1},d(i){i&&h(e),s&&s.d(i),r=!1,N(o)}}}function Jt(t,e,n){let{$$slots:r={},$$scope:o}=e,{audioCtx:l}=e,{pulseHz:s}=e,i,a=!1;function c(){i&&i.stop(),i=l.createOscillator(),i.type="sine",i.frequency.setValueAtTime(s,l.currentTime),i.connect(l.destination),i.start(),n(0,a=!0)}function m(){i&&(i.stop(),n(0,a=!1))}function u(f){f.key==="Enter"&&c()}function d(f){f.key==="Enter"&&m()}return t.$$set=f=>{"audioCtx"in f&&n(5,l=f.audioCtx),"pulseHz"in f&&n(6,s=f.pulseHz),"$$scope"in f&&n(7,o=f.$$scope)},[a,c,m,u,d,l,s,o,r]}class Qt extends R{constructor(e){super(),H(this,e,Jt,Xt,z,{audioCtx:5,pulseHz:6})}}const Yt={a:"C3",w:"C#3",s:"D3",e:"D#3",d:"E3",f:"F3",t:"F#3",g:"G3",y:"G#3",h:"A3",u:"A#3",j:"B3",k:"C4",o:"C#4",l:"D4",p:"D#4",";":"E4","[":"F4","'":"F#4","]":"G4","\\":"G#4",z:"C5",x:"C#5",c:"D5",v:"D#5",b:"E5",n:"F5",m:"F#5",",":"G5",".":"G#5","/":"A5",1:"C6",2:"C#6",3:"D6",4:"D#6",5:"E6",6:"F6",7:"F#6",8:"G6",9:"G#6",0:"A6","-":"A#6","=":"B6"},Zt={a:"C2",w:"C#2",s:"D2",e:"D#2",d:"E2",f:"F2",t:"F#2",g:"G2",y:"G#2",h:"A2",u:"A#2",j:"B2",k:"C3",o:"C#3",l:"D3",p:"D#3",";":"E3","[":"F3","'":"F#3","]":"G3","\\":"G#3",z:"A3",x:"A#3",c:"B3",v:"C4",b:"C#4",n:"D4",m:"D#4",",":"E4",".":"F4","/":"F#4",1:"G4",2:"G#4",3:"A4",4:"A#4",5:"B4",6:"C5",7:"C#5",8:"D5",9:"D#5",0:"E5","-":"F5","=":"F#5"},rt={max:Yt,real:Zt};function ot(t,e,n){const r=t.slice();return r[4]=e[n],r}function lt(t,e,n){const r=t.slice();return r[7]=e[n],r}function it(t){let e=t[7]+"",n,r;return{c(){n=$(e),r=$(" ")},m(o,l){p(o,n,l),p(o,r,l)},p(o,l){l&1&&e!==(e=o[7]+"")&&gt(n,e)},d(o){o&&h(n),o&&h(r)}}}function st(t){let e=t[4]+"",n,r;return{c(){n=$(e),r=$(" ")},m(o,l){p(o,n,l),p(o,r,l)},p(o,l){l&2&&e!==(e=o[4]+"")&&gt(n,e)},d(o){o&&h(n),o&&h(r)}}}function Wt(t){let e,n,r,o,l=t[0],s=[];for(let c=0;c<l.length;c+=1)s[c]=it(lt(t,l,c));let i=t[1],a=[];for(let c=0;c<i.length;c+=1)a[c]=st(ot(t,i,c));return{c(){e=y("div"),n=y("strong");for(let c=0;c<s.length;c+=1)s[c].c();r=S(),o=y("strong");for(let c=0;c<a.length;c+=1)a[c].c();G(n,"class","svelte-lcpcn9"),G(o,"class","svelte-lcpcn9")},m(c,m){p(c,e,m),E(e,n);for(let u=0;u<s.length;u+=1)s[u].m(n,null);E(e,r),E(e,o);for(let u=0;u<a.length;u+=1)a[u].m(o,null)},p(c,[m]){if(m&1){l=c[0];let u;for(u=0;u<l.length;u+=1){const d=lt(c,l,u);s[u]?s[u].p(d,m):(s[u]=it(d),s[u].c(),s[u].m(n,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=l.length}if(m&2){i=c[1];let u;for(u=0;u<i.length;u+=1){const d=ot(c,i,u);a[u]?a[u].p(d,m):(a[u]=st(d),a[u].c(),a[u].m(o,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}},i:b,o:b,d(c){c&&h(e),U(s,c),U(a,c)}}}function te(t,e,n){let r=[],o=[],l=i=>{const a=i.key;r.indexOf(a)===-1&&(n(0,r=[...r,a]),n(1,o=[...o,rt.real[a]].filter(c=>!!c)))},s=i=>{n(0,r=[...r.filter(()=>!i.key)]),n(1,o=[...o.filter(()=>!rt.real[i.key])].filter(a=>!!a))};return zt(async()=>{document.addEventListener("keydown",l),document.addEventListener("keyup",s)}),[r,o]}class ee extends R{constructor(e){super(),H(this,e,te,Wt,z,{})}}function ne(t){let e,n,r,o,l,s;return{c(){e=y("label"),e.textContent="Gain",n=S(),r=y("input"),G(e,"for","gain"),G(r,"id","gain"),G(r,"type","range"),r.value=o=t[0].gain.value*100},m(i,a){p(i,e,a),p(i,n,a),p(i,r,a),l||(s=A(r,"change",t[1]),l=!0)},p(i,[a]){a&1&&o!==(o=i[0].gain.value*100)&&(r.value=o)},i:b,o:b,d(i){i&&h(e),i&&h(n),i&&h(r),l=!1,s()}}}function re(t,e,n){let{audioCtx:r}=e,{amp:o}=e,{initialGain:l}=e;o.gain.setValueAtTime(l,r.currentTime);function s(i){let a=i.target.value/100;console.log("nextGainValue",a),o.gain.setValueAtTime(a,r.currentTime)}return t.$$set=i=>{"audioCtx"in i&&n(2,r=i.audioCtx),"amp"in i&&n(0,o=i.amp),"initialGain"in i&&n(3,l=i.initialGain)},[o,s,r,l]}class oe extends R{constructor(e){super(),H(this,e,re,ne,z,{audioCtx:2,amp:0,initialGain:3})}}var I=(t,e)=>Array(Math.abs(e)+1).join(t);function yt(t){return t!==null&&typeof t=="object"&&typeof t.name=="string"}function vt(t){return t!==null&&typeof t=="object"&&typeof t.step=="number"&&typeof t.alt=="number"}var bt=[0,2,4,-1,1,3,5],At=bt.map(t=>Math.floor(t*7/12));function Ct(t){const{step:e,alt:n,oct:r,dir:o=1}=t,l=bt[e]+7*n;if(r===void 0)return[o*l];const s=r-At[e]-4*n;return[o*l,o*s]}var le=[3,0,4,1,5,2,6];function ie(t){const[e,n,r]=t,o=le[se(e)],l=Math.floor((e+1)/7);if(n===void 0)return{step:o,alt:l,dir:r};const s=n+4*l+At[o];return{step:o,alt:l,oct:s,dir:r}}function se(t){const e=(t+1)%7;return e<0?7+e:e}var Et={empty:!0,name:"",pc:"",acc:""},ct=new Map,ce=t=>"CDEFGAB".charAt(t),ue=t=>t<0?I("b",-t):I("#",t),ae=t=>t[0]==="b"?-t.length:t.length;function k(t){const e=JSON.stringify(t),n=ct.get(e);if(n)return n;const r=typeof t=="string"?pe(t):vt(t)?k(ge(t)):yt(t)?k(t.name):Et;return ct.set(e,r),r}var fe=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function de(t){const e=fe.exec(t);return[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]}function me(t){return k(ie(t))}var he=(t,e)=>(t%e+e)%e,q=[0,2,4,5,7,9,11];function pe(t){const e=de(t);if(e[0]===""||e[3]!=="")return Et;const n=e[0],r=e[1],o=e[2],l=(n.charCodeAt(0)+3)%7,s=ae(r),i=o.length?+o:void 0,a=Ct({step:l,alt:s,oct:i}),c=n+r+o,m=n+r,u=(q[l]+s+120)%12,d=i===void 0?he(q[l]+s,12)-12*99:q[l]+s+12*(i+1),f=d>=0&&d<=127?d:null,_=i===void 0?null:Math.pow(2,(d-69)/12)*440;return{empty:!1,acc:r,alt:s,chroma:u,coord:a,freq:_,height:d,letter:n,midi:f,name:c,oct:i,pc:m,step:l}}function ge(t){const{step:e,alt:n,oct:r}=t,o=ce(e);if(!o)return"";const l=o+ue(n);return r||r===0?l+r:l}var Q={empty:!0,name:"",acc:""},_e="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",ye="(AA|A|P|M|m|d|dd)([-+]?\\d+)",ve=new RegExp("^"+_e+"|"+ye+"$");function be(t){const e=ve.exec(`${t}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}var ut={};function Y(t){return typeof t=="string"?ut[t]||(ut[t]=Ae(t)):vt(t)?Y(Ee(t)):yt(t)?Y(t.name):Q}var at=[0,2,4,5,7,9,11],Gt="PMMPPMM";function Ae(t){const e=be(t);if(e[0]==="")return Q;const n=+e[0],r=e[1],o=(Math.abs(n)-1)%7,l=Gt[o];if(l==="M"&&r==="P")return Q;const s=l==="M"?"majorable":"perfectable",i=""+n+r,a=n<0?-1:1,c=n===8||n===-8?n:a*(o+1),m=Ce(s,r),u=Math.floor((Math.abs(n)-1)/7),d=a*(at[o]+m+12*u),f=(a*(at[o]+m)%12+12)%12,_=Ct({step:o,alt:m,oct:u,dir:a});return{empty:!1,name:i,num:n,q:r,step:o,alt:m,dir:a,type:s,simple:c,semitones:d,chroma:f,coord:_,oct:u}}function Ce(t,e){return e==="M"&&t==="majorable"||e==="P"&&t==="perfectable"?0:e==="m"&&t==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(t==="perfectable"?e.length:e.length+1):0}function Ee(t){const{step:e,alt:n,oct:r=0,dir:o}=t;if(!o)return"";const l=e+1+7*r,s=l===0?e+1:l,i=o<0?"-":"",a=Gt[e]==="M"?"majorable":"perfectable";return i+s+Ge(a,n)}function Ge(t,e){return e===0?t==="majorable"?"M":"P":e===-1&&t==="majorable"?"m":e>0?I("A",e):I("d",t==="perfectable"?e:e+1)}function Mt(t,e){const n=k(t),r=Array.isArray(e)?e:Y(e).coord;if(n.empty||!r||r.length<2)return"";const o=n.coord,l=o.length===1?[o[0]+r[0]]:[o[0]+r[0],o[1]+r[1]];return me(l).name}var Me=Math.log(2),Fe=Math.log(440);function Ft(t){const e=12*(Math.log(t)-Fe)/Me+69;return Math.round(e*100)/100}var xe="C C# D D# E F F# G G# A A# B".split(" "),$e="C Db D Eb E F Gb G Ab A Bb B".split(" ");function T(t,e={}){if(isNaN(t)||t===-1/0||t===1/0)return"";t=Math.round(t);const r=(e.sharps===!0?xe:$e)[t%12];if(e.pitchClass)return r;const o=Math.floor(t/12)-1;return r+o}var ke=["C","D","E","F","G","A","B"],xt=t=>t.name,$t=t=>t.map(k).filter(e=>!e.empty);function Ne(t){return t===void 0?ke.slice():Array.isArray(t)?$t(t).map(xt):[]}var g=k,Te=t=>g(t).name,we=t=>g(t).pc,Se=t=>g(t).acc,De=t=>g(t).oct,Oe=t=>g(t).midi,Pe=t=>g(t).freq,Le=t=>g(t).chroma;function je(t){return T(t)}function Be(t){return T(Ft(t))}function Ie(t){return T(Ft(t),{sharps:!0})}function ze(t){return T(t,{sharps:!0})}var O=Mt,He=Mt,kt=t=>e=>O(e,t),Re=kt,Nt=t=>e=>O(t,e),Ve=Nt;function Tt(t,e){return O(t,[e,0])}var qe=Tt;function Ue(t,e){return O(t,[0,e])}var Z=(t,e)=>t.height-e.height,Ke=(t,e)=>e.height-t.height;function wt(t,e){return e=e||Z,$t(t).sort(e).map(xt)}function Xe(t){return wt(t,Z).filter((e,n,r)=>n===0||e!==r[n-1])}var Je=t=>{const e=g(t);return e.empty?"":T(e.midi||e.chroma,{sharps:e.alt>0,pitchClass:e.midi===null})};function Qe(t,e){const n=g(t);if(n.empty)return"";const r=g(e||T(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(n.oct===void 0)return r.pc;const o=n.chroma-n.alt,l=r.chroma-r.alt,s=o>11||l<0?-1:o<0||l>11?1:0,i=n.oct+s;return r.pc+i}var Ye={names:Ne,get:g,name:Te,pitchClass:we,accidentals:Se,octave:De,midi:Oe,ascending:Z,descending:Ke,sortedNames:wt,sortedUniqNames:Xe,fromMidi:je,fromMidiSharps:ze,freq:Pe,fromFreq:Be,fromFreqSharps:Ie,chroma:Le,transpose:O,tr:He,transposeBy:kt,trBy:Re,transposeFrom:Nt,trFrom:Ve,transposeFifths:Tt,transposeOctaves:Ue,trFifths:qe,simplify:Je,enharmonic:Qe};function ft(t,e,n){const r=t.slice();return r[7]=e[n][0],r[8]=e[n][1],r}function Ze(t){let e=t[7]+"",n;return{c(){n=$(e)},m(r,o){p(r,n,o)},p:b,d(r){r&&h(n)}}}function dt(t){let e,n,r,o;return n=new Qt({props:{pulseHz:t[8],audioCtx:t[0],$$slots:{default:[Ze]},$$scope:{ctx:t}}}),{c(){e=y("li"),J(n.$$.fragment),r=S()},m(l,s){p(l,e,s),j(n,e,null),E(e,r),o=!0},p(l,s){const i={};s&2048&&(i.$$scope={dirty:s,ctx:l}),n.$set(i)},i(l){o||(v(n.$$.fragment,l),o=!0)},o(l){x(n.$$.fragment,l),o=!1},d(l){l&&h(e),B(n)}}}function We(t){let e,n,r,o,l,s,i;n=new ee({}),o=new oe({props:{audioCtx:t[0],amp:t[1],initialGain:t[2].gain}});let a=t[3],c=[];for(let u=0;u<a.length;u+=1)c[u]=dt(ft(t,a,u));const m=u=>x(c[u],1,1,()=>{c[u]=null});return{c(){e=y("main"),J(n.$$.fragment),r=S(),J(o.$$.fragment),l=S(),s=y("ol");for(let u=0;u<c.length;u+=1)c[u].c();G(s,"class","svelte-b9y5ad")},m(u,d){p(u,e,d),j(n,e,null),E(e,r),j(o,e,null),E(e,l),E(e,s);for(let f=0;f<c.length;f+=1)c[f].m(s,null);i=!0},p(u,[d]){if(d&9){a=u[3];let f;for(f=0;f<a.length;f+=1){const _=ft(u,a,f);c[f]?(c[f].p(_,d),v(c[f],1)):(c[f]=dt(_),c[f].c(),v(c[f],1),c[f].m(s,null))}for(qt(),f=a.length;f<c.length;f+=1)m(f);Ut()}},i(u){if(!i){v(n.$$.fragment,u),v(o.$$.fragment,u);for(let d=0;d<a.length;d+=1)v(c[d]);i=!0}},o(u){x(n.$$.fragment,u),x(o.$$.fragment,u),c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)x(c[d]);i=!1},d(u){u&&h(e),B(n),B(o),U(c,u)}}}function tn(t){let e=new AudioContext,n=e.createGain(),r={gain:.2};navigator.mediaDevices.getUserMedia||console.error("getUserMedia not supported on your browser!"),n.connect(e.destination);let o="CDEFGAB".split(""),s=[0,1,2,3,4,5,6].map(i=>o.map(a=>{let c=`${a}${i}`;return[c,Ye.freq(c)]})).reduce((i,a)=>[...i,...a],[]);return[e,n,r,s]}class en extends R{constructor(e){super(),H(this,e,tn,We,z,{})}}new en({target:document.getElementById("app")});
