(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function m(){}function Rt(t,e){for(const n in e)t[n]=e[n];return t}function vt(t){return t()}function it(){return Object.create(null)}function $(t){t.forEach(vt)}function tt(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function qt(t){return Object.keys(t).length===0}function bt(t,...e){if(t==null)return m;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function U(t,e,n){t.$$.on_destroy.push(bt(e,n))}function Kt(t,e,n,r){if(t){const o=At(t,e,n,r);return t[0](o)}}function At(t,e,n,r){return t[1]&&r?Rt(n.ctx.slice(),t[1](r(e))):n.ctx}function Vt(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const s=[],i=Math.max(e.dirty.length,o.length);for(let c=0;c<i;c+=1)s[c]=e.dirty[c]|o[c];return s}return e.dirty|o}return e.dirty}function Xt(t,e,n,r,o,s){if(o){const i=At(e,n,r,s);t.p(i,o)}}function Zt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function P(t,e,n){return t.set(n),e}function I(t,e){t.appendChild(e)}function A(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode&&t.parentNode.removeChild(t)}function $t(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function M(t){return document.createElement(t)}function z(t){return document.createTextNode(t)}function Et(){return z(" ")}function E(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function H(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ut(t){return Array.from(t.childNodes)}function Yt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ut(t,e,n){t.classList[n?"add":"remove"](e)}let S;function G(t){S=t}function Jt(){if(!S)throw new Error("Function called outside component initialization");return S}function Qt(t){Jt().$$.on_mount.push(t)}const N=[],lt=[],O=[],at=[],Wt=Promise.resolve();let Y=!1;function te(){Y||(Y=!0,Wt.then(Ct))}function J(t){O.push(t)}const V=new Set;let C=0;function Ct(){if(C!==0)return;const t=S;do{try{for(;C<N.length;){const e=N[C];C++,G(e),ee(e.$$)}}catch(e){throw N.length=0,C=0,e}for(G(null),N.length=0,C=0;lt.length;)lt.pop()();for(let e=0;e<O.length;e+=1){const n=O[e];V.has(n)||(V.add(n),n())}O.length=0}while(N.length);for(;at.length;)at.pop()();Y=!1,V.clear(),G(t)}function ee(t){if(t.fragment!==null){t.update(),$(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}const B=new Set;let v;function ne(){v={r:0,c:[],p:v}}function re(){v.r||$(v.c),v=v.p}function b(t,e){t&&t.i&&(B.delete(t),t.i(e))}function w(t,e,n,r){if(t&&t.o){if(B.has(t))return;B.add(t),v.c.push(()=>{B.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Ft(t){t&&t.c()}function et(t,e,n,r){const{fragment:o,after_update:s}=t.$$;o&&o.m(e,n),r||J(()=>{const i=t.$$.on_mount.map(vt).filter(tt);t.$$.on_destroy?t.$$.on_destroy.push(...i):$(i),t.$$.on_mount=[]}),s.forEach(J)}function nt(t,e){const n=t.$$;n.fragment!==null&&($(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function oe(t,e){t.$$.dirty[0]===-1&&(N.push(t),te(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function rt(t,e,n,r,o,s,i,c=[-1]){const a=S;G(t);const u=t.$$={fragment:null,ctx:[],props:s,update:m,not_equal:o,bound:it(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:it(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};i&&i(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(l,d,...p)=>{const g=p.length?p[0]:d;return u.ctx&&o(u.ctx[l],u.ctx[l]=g)&&(!u.skip_bound&&u.bound[l]&&u.bound[l](g),f&&oe(t,l)),d}):[],u.update(),f=!0,$(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const l=Ut(e.target);u.fragment&&u.fragment.l(l),l.forEach(y)}else u.fragment&&u.fragment.c();e.intro&&b(t.$$.fragment),et(t,e.target,e.anchor,e.customElement),Ct()}G(a)}class ot{$destroy(){nt(this,1),this.$destroy=m}$on(e,n){if(!tt(n))return m;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!qt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const F=[];function se(t,e){return{subscribe:st(t,e).subscribe}}function st(t,e=m){let n;const r=new Set;function o(c){if(K(t,c)&&(t=c,n)){const a=!F.length;for(const u of r)u[1](),F.push(u,t);if(a){for(let u=0;u<F.length;u+=2)F[u][0](F[u+1]);F.length=0}}}function s(c){o(c(t))}function i(c,a=m){const u=[c,a];return r.add(u),r.size===1&&(n=e(o)||m),c(t),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:o,update:s,subscribe:i}}function ce(t,e,n){const r=!Array.isArray(t),o=r?[t]:t,s=e.length<2;return se(n,i=>{let c=!1;const a=[];let u=0,f=m;const l=()=>{if(u)return;f();const p=e(r?a[0]:a,i);s?i(p):f=tt(p)?p:m},d=o.map((p,g)=>bt(p,Ht=>{a[g]=Ht,u&=~(1<<g),c&&l()},()=>{u|=1<<g}));return c=!0,l(),function(){$(d),f()}})}var R=(t,e)=>Array(Math.abs(e)+1).join(t);function Nt(t){return t!==null&&typeof t=="object"&&typeof t.name=="string"}function Mt(t){return t!==null&&typeof t=="object"&&typeof t.step=="number"&&typeof t.alt=="number"}var Tt=[0,2,4,-1,1,3,5],kt=Tt.map(t=>Math.floor(t*7/12));function Gt(t){const{step:e,alt:n,oct:r,dir:o=1}=t,s=Tt[e]+7*n;if(r===void 0)return[o*s];const i=r-kt[e]-4*n;return[o*s,o*i]}var ie=[3,0,4,1,5,2,6];function ue(t){const[e,n,r]=t,o=ie[le(e)],s=Math.floor((e+1)/7);if(n===void 0)return{step:o,alt:s,dir:r};const i=n+4*s+kt[o];return{step:o,alt:s,oct:i,dir:r}}function le(t){const e=(t+1)%7;return e<0?7+e:e}var wt={empty:!0,name:"",pc:"",acc:""},ft=new Map,ae=t=>"CDEFGAB".charAt(t),fe=t=>t<0?R("b",-t):R("#",t),de=t=>t[0]==="b"?-t.length:t.length;function T(t){const e=JSON.stringify(t),n=ft.get(e);if(n)return n;const r=typeof t=="string"?_e(t):Mt(t)?T(ye(t)):Nt(t)?T(t.name):wt;return ft.set(e,r),r}var pe=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function me(t){const e=pe.exec(t);return[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]}function he(t){return T(ue(t))}var ge=(t,e)=>(t%e+e)%e,X=[0,2,4,5,7,9,11];function _e(t){const e=me(t);if(e[0]===""||e[3]!=="")return wt;const n=e[0],r=e[1],o=e[2],s=(n.charCodeAt(0)+3)%7,i=de(r),c=o.length?+o:void 0,a=Gt({step:s,alt:i,oct:c}),u=n+r+o,f=n+r,l=(X[s]+i+120)%12,d=c===void 0?ge(X[s]+i,12)-12*99:X[s]+i+12*(c+1),p=d>=0&&d<=127?d:null,g=c===void 0?null:Math.pow(2,(d-69)/12)*440;return{empty:!1,acc:r,alt:i,chroma:l,coord:a,freq:g,height:d,letter:n,midi:p,name:u,oct:c,pc:f,step:s}}function ye(t){const{step:e,alt:n,oct:r}=t,o=ae(e);if(!o)return"";const s=o+fe(n);return r||r===0?s+r:s}var Q={empty:!0,name:"",acc:""},ve="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",be="(AA|A|P|M|m|d|dd)([-+]?\\d+)",Ae=new RegExp("^"+ve+"|"+be+"$");function $e(t){const e=Ae.exec(`${t}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}var dt={};function W(t){return typeof t=="string"?dt[t]||(dt[t]=Ee(t)):Mt(t)?W(Fe(t)):Nt(t)?W(t.name):Q}var pt=[0,2,4,5,7,9,11],Dt="PMMPPMM";function Ee(t){const e=$e(t);if(e[0]==="")return Q;const n=+e[0],r=e[1],o=(Math.abs(n)-1)%7,s=Dt[o];if(s==="M"&&r==="P")return Q;const i=s==="M"?"majorable":"perfectable",c=""+n+r,a=n<0?-1:1,u=n===8||n===-8?n:a*(o+1),f=Ce(i,r),l=Math.floor((Math.abs(n)-1)/7),d=a*(pt[o]+f+12*l),p=(a*(pt[o]+f)%12+12)%12,g=Gt({step:o,alt:f,oct:l,dir:a});return{empty:!1,name:c,num:n,q:r,step:o,alt:f,dir:a,type:i,simple:u,semitones:d,chroma:p,coord:g,oct:l}}function Ce(t,e){return e==="M"&&t==="majorable"||e==="P"&&t==="perfectable"?0:e==="m"&&t==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(t==="perfectable"?e.length:e.length+1):0}function Fe(t){const{step:e,alt:n,oct:r=0,dir:o}=t;if(!o)return"";const s=e+1+7*r,i=s===0?e+1:s,c=o<0?"-":"",a=Dt[e]==="M"?"majorable":"perfectable";return c+i+Ne(a,n)}function Ne(t,e){return e===0?t==="majorable"?"M":"P":e===-1&&t==="majorable"?"m":e>0?R("A",e):R("d",t==="perfectable"?e:e+1)}function St(t,e){const n=T(t),r=Array.isArray(e)?e:W(e).coord;if(n.empty||!r||r.length<2)return"";const o=n.coord,s=o.length===1?[o[0]+r[0]]:[o[0]+r[0],o[1]+r[1]];return he(s).name}var Me=Math.log(2),Te=Math.log(440);function xt(t){const e=12*(Math.log(t)-Te)/Me+69;return Math.round(e*100)/100}var ke="C C# D D# E F F# G G# A A# B".split(" "),Ge="C Db D Eb E F Gb G Ab A Bb B".split(" ");function k(t,e={}){if(isNaN(t)||t===-1/0||t===1/0)return"";t=Math.round(t);const r=(e.sharps===!0?ke:Ge)[t%12];if(e.pitchClass)return r;const o=Math.floor(t/12)-1;return r+o}var we=["C","D","E","F","G","A","B"],Pt=t=>t.name,Ot=t=>t.map(T).filter(e=>!e.empty);function De(t){return t===void 0?we.slice():Array.isArray(t)?Ot(t).map(Pt):[]}var h=T,Se=t=>h(t).name,xe=t=>h(t).pc,Pe=t=>h(t).acc,Oe=t=>h(t).oct,Be=t=>h(t).midi,Le=t=>h(t).freq,je=t=>h(t).chroma;function Ie(t){return k(t)}function ze(t){return k(xt(t))}function He(t){return k(xt(t),{sharps:!0})}function Re(t){return k(t,{sharps:!0})}var x=St,qe=St,Bt=t=>e=>x(e,t),Ke=Bt,Lt=t=>e=>x(t,e),Ve=Lt;function jt(t,e){return x(t,[e,0])}var Xe=jt;function Ze(t,e){return x(t,[0,e])}var ct=(t,e)=>t.height-e.height,Ue=(t,e)=>e.height-t.height;function It(t,e){return e=e||ct,Ot(t).sort(e).map(Pt)}function Ye(t){return It(t,ct).filter((e,n,r)=>n===0||e!==r[n-1])}var Je=t=>{const e=h(t);return e.empty?"":k(e.midi||e.chroma,{sharps:e.alt>0,pitchClass:e.midi===null})};function Qe(t,e){const n=h(t);if(n.empty)return"";const r=h(e||k(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(n.oct===void 0)return r.pc;const o=n.chroma-n.alt,s=r.chroma-r.alt,i=o>11||s<0?-1:o<0||s>11?1:0,c=n.oct+i;return r.pc+c}var q={names:De,get:h,name:Se,pitchClass:xe,accidentals:Pe,octave:Oe,midi:Be,ascending:ct,descending:Ue,sortedNames:It,sortedUniqNames:Ye,fromMidi:Ie,fromMidiSharps:Re,freq:Le,fromFreq:ze,fromFreqSharps:He,chroma:je,transpose:x,tr:qe,transposeBy:Bt,trBy:Ke,transposeFrom:Lt,trFrom:Ve,transposeFifths:jt,transposeOctaves:Ze,trFifths:Xe,simplify:Je,enharmonic:Qe};const Z=st([]),L=st([]),We=ce(L,t=>t.map(q.freq)),_=new AudioContext,tn=20,mt=0,j=new Map;function zt(t){D(t);try{const e=_.createOscillator();j.set(t,e),_.createGain().gain.setValueAtTime(0,_.currentTime),e.addEventListener("ended",D),e.type="sine",e.frequency.setValueAtTime(t,_.currentTime);const r=new PannerNode(_);r.refDistance=1,r.positionZ.setValueAtTime(_.currentTime,_.currentTime+mt),r.positionZ.linearRampToValueAtTime(tn,_.currentTime+mt),e.connect(r).connect(_.destination),e.start(_.currentTime)}catch(e){console.info(e),D(t)}}function D(t){j.has(t)&&(j.get(t).stop(),j.delete(t))}function en(t){let e,n,r,o;const s=t[7].default,i=Kt(s,t,t[6],null);return{c(){e=M("button"),i&&i.c(),H(e,"class","svelte-11vc9t6"),ut(e,"playing",t[1].includes(t[0]))},m(c,a){A(c,e,a),i&&i.m(e,null),n=!0,r||(o=[E(e,"mousedown",t[3]),E(e,"mouseup",t[2]),E(e,"keydown",t[4]),E(e,"keyup",t[5]),E(e,"touchstart",t[3],{passive:!0}),E(e,"touchend",t[2],{passive:!0})],r=!0)},p(c,[a]){i&&i.p&&(!n||a&64)&&Xt(i,s,c,c[6],n?Vt(s,c[6],a,null):Zt(c[6]),null),(!n||a&3)&&ut(e,"playing",c[1].includes(c[0]))},i(c){n||(b(i,c),n=!0)},o(c){w(i,c),n=!1},d(c){c&&y(e),i&&i.d(c),r=!1,$(o)}}}function nn(t,e,n){let r;U(t,We,l=>n(1,r=l));let{$$slots:o={},$$scope:s}=e,{pulseHz:i}=e;function c(){D(i)}function a(){zt(i)}function u(l){l.key==="Enter"&&a()}function f(l){l.key==="Enter"&&c()}return t.$$set=l=>{"pulseHz"in l&&n(0,i=l.pulseHz),"$$scope"in l&&n(6,s=l.$$scope)},[i,r,c,a,u,f,s,o]}class rn extends ot{constructor(e){super(),rt(this,e,nn,en,K,{pulseHz:0})}}const on={a:"C3",w:"C#3",s:"D3",e:"D#3",d:"E3",f:"F3",t:"F#3",g:"G3",y:"G#3",h:"A3",u:"A#3",j:"B3",k:"C4",o:"C#4",l:"D4",p:"D#4",";":"E4","[":"F4","'":"F#4","]":"G4","\\":"G#4",z:"C5",x:"C#5",c:"D5",v:"D#5",b:"E5",n:"F5",m:"F#5",",":"G5",".":"G#5","/":"A5",1:"C6",2:"C#6",3:"D6",4:"D#6",5:"E6",6:"F6",7:"F#6",8:"G6",9:"G#6",0:"A6","-":"A#6","=":"B6"},sn={a:"C2",w:"C#2",s:"D2",e:"D#2",d:"E2",f:"F2",t:"F#2",g:"G2",y:"G#2",h:"A2",u:"A#2",j:"B2",k:"C3",o:"C#3",l:"D3",p:"D#3",";":"E3","[":"F3","'":"F#3","]":"G3","\\":"G#3",z:"A3",x:"A#3",c:"B3",v:"C4",b:"C#4",n:"D4",m:"D#4",",":"E4",".":"F4","/":"F#4",1:"G4",2:"G#4",3:"A4",4:"A#4",5:"B4",6:"C5",7:"C#5",8:"D5",9:"D#5",0:"E5","-":"F5","=":"F#5"},cn={max:on,real:sn};function ht(t,e,n){const r=t.slice();return r[5]=e[n],r}function gt(t){let e=t[5]+"",n,r;return{c(){n=z(e),r=z(" ")},m(o,s){A(o,n,s),A(o,r,s)},p(o,s){s&1&&e!==(e=o[5]+"")&&Yt(n,e)},d(o){o&&y(n),o&&y(r)}}}function un(t){let e,n,r=t[0],o=[];for(let s=0;s<r.length;s+=1)o[s]=gt(ht(t,r,s));return{c(){e=M("div"),n=M("strong");for(let s=0;s<o.length;s+=1)o[s].c();H(n,"class","svelte-kf75hh"),H(e,"class","svelte-kf75hh")},m(s,i){A(s,e,i),I(e,n);for(let c=0;c<o.length;c+=1)o[c].m(n,null)},p(s,[i]){if(i&1){r=s[0];let c;for(c=0;c<r.length;c+=1){const a=ht(s,r,c);o[c]?o[c].p(a,i):(o[c]=gt(a),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},i:m,o:m,d(s){s&&y(e),$t(o,s)}}}function ln(t,e,n){let r,o;U(t,L,a=>n(0,r=a)),U(t,Z,a=>n(1,o=a));const s=cn.max;let i=a=>{const u=a.key;if(o.indexOf(u)===-1){const f=s[u];P(Z,o=[...o,u],o),P(L,r=[...r,f].filter(l=>!!l),r),zt(q.freq(f))}},c=a=>{const u=s[a.key];P(Z,o=[...o.filter(()=>!a.key)],o),P(L,r=[...r.filter(()=>!s[a.key])].filter(f=>!!f),r),D(q.freq(u))};return Qt(async()=>{document.addEventListener("keydown",i),document.addEventListener("keyup",c)}),[r]}class an extends ot{constructor(e){super(),rt(this,e,ln,un,K,{})}}function _t(t,e,n){const r=t.slice();return r[5]=e[n][0],r[6]=e[n][1],r}function fn(t){let e=t[5]+"",n;return{c(){n=z(e)},m(r,o){A(r,n,o)},p:m,d(r){r&&y(n)}}}function yt(t){let e,n,r,o;return n=new rn({props:{pulseHz:t[6],$$slots:{default:[fn]},$$scope:{ctx:t}}}),{c(){e=M("li"),Ft(n.$$.fragment),r=Et()},m(s,i){A(s,e,i),et(n,e,null),I(e,r),o=!0},p(s,i){const c={};i&512&&(c.$$scope={dirty:i,ctx:s}),n.$set(c)},i(s){o||(b(n.$$.fragment,s),o=!0)},o(s){w(n.$$.fragment,s),o=!1},d(s){s&&y(e),nt(n)}}}function dn(t){let e,n,r,o,s;n=new an({});let i=t[0],c=[];for(let u=0;u<i.length;u+=1)c[u]=yt(_t(t,i,u));const a=u=>w(c[u],1,1,()=>{c[u]=null});return{c(){e=M("main"),Ft(n.$$.fragment),r=Et(),o=M("ol");for(let u=0;u<c.length;u+=1)c[u].c();H(o,"class","svelte-17yb10d")},m(u,f){A(u,e,f),et(n,e,null),I(e,r),I(e,o);for(let l=0;l<c.length;l+=1)c[l].m(o,null);s=!0},p(u,[f]){if(f&1){i=u[0];let l;for(l=0;l<i.length;l+=1){const d=_t(u,i,l);c[l]?(c[l].p(d,f),b(c[l],1)):(c[l]=yt(d),c[l].c(),b(c[l],1),c[l].m(o,null))}for(ne(),l=i.length;l<c.length;l+=1)a(l);re()}},i(u){if(!s){b(n.$$.fragment,u);for(let f=0;f<i.length;f+=1)b(c[f]);s=!0}},o(u){w(n.$$.fragment,u),c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)w(c[f]);s=!1},d(u){u&&y(e),nt(n),$t(c,u)}}}function pn(t){let e=new AudioContext;e.createGain().connect(e.destination);let r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return[[0,1,2,3,4,5,6].map(i=>r.map(c=>{let a=`${c}${i}`;return[a,q.freq(a)]})).reduce((i,c)=>[...i,...c],[])]}class mn extends ot{constructor(e){super(),rt(this,e,pn,dn,K,{})}}new mn({target:document.getElementById("app")});
